# Notification

Notifications are communicated between FE and BE via SignalR connection. They can be viewed by clicking on the notifications action button at the bottom right corner of the page. It will open the `Notification Drawer` that contains the Filter tabs (All/Read/Unread) [found in the NotificationDrawer file](NotificationDrawer.tsx) and the filtered notification list grouped by their creation date [found in the GroupedNotificationsLists file](GroupedNotificationLists.tsx).

</br>

## New notification types

The notification types are provided by the BE API and automatically generated by the `generate-client` script using the swagger API and are placed to the [NotificationType file](../../api/swagger/models/NotificationType.ts). There are two checks to guarantee the implementation for the new notification types at the `generate-backend-translation-keys` script. It will also run at deployment time and will return an error message if there is a new, not implemented notification type. The checker code is at the [generate-backend-translation-keys file](../../../config/generate-backend-translation-keys.js) and checks if the notification navigation links exists.

A test file is also available [NotificationTypeCheck tests](NotificationTypeChecks.test.tsx) that ensures that every type has a translation and a preValidation method.

</br>

## Adding new notification types

- Run the `generate-client` script
- Run the `generate-backend-translation-keys` script
- Provide translation to the newly created notification translations at the localization files found at the [locales directory](../../app/i18n/locales), `enum.notification-type` parent
- Provide a notification link in the [notificationLink json file](notificationLinks.json)
- Provide a pre-validator method in the [NotificationLinkPreValidator](NotificationLinkPreValidator.tsx)

  ```TS
    async CampaignMovedToWaitingState(actualId: number, parentId: number): Promise<boolean> {
    return await this.GetCoupon(actualId)
  },
  ```

  The method name must be the same as the `NotificationType` and the two parameters must be added

- Parameterize the translation in the [NotificationItem](NotificationItem.tsx) file's switch statement
